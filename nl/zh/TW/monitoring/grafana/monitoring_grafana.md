---

copyright:
  years: 2015, 2017

lastupdated: "2017-04-06"

---


{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:screen: .screen}

# 建立 Grafana 儀表板
{:#monitoring_grafana}

建立自訂 Grafana 儀表板，以顯示在 {{site.data.keyword.Bluemix}} 組織空間中執行之所有容器的度量值。
{:shortdesc}

請完成下列步驟，以建立 Grafana 儀表板：

1. 從 Web 瀏覽器啟動 Grafana。如需相關資訊，請參閱[從 Web 瀏覽器導覽至 Grafana 儀表板](monitoring_analyzing_metrics_grafana.html#launch_grafana_from_browser)。

2. 儲存預設儀表板。

    1. 在工具列中，按一下「儲存」圖示。
    2. 輸入儀表板的名稱。
    3. 按一下名稱欄位旁的「儲存」圖示。
   
3. 在使用儀表板時，停用自動頁面重新整理。 

    1. 按一下標頭中的時間選取器。
    2. 選取**自動重新整理**。
    3. 按一下**關閉**。
 
 5. 刪除範例列。
 
     1. 將游標移至*歡迎使用 Grafana* 標頭旁的「列」功能表調節器上方，然後按一下滑出的「列」功能表圖示。
     2. 按一下**刪除列**，然後按一下**是**。
     
     重複這些步驟來移除「文件鏈結」及「第一個圖形」列。 
     
     在頁面標頭中調整時間選取器，以確保您可以看到資料。預設值為 6 小時到數秒前。選取**前 30 天**。
     
6. 新增視覺化。

    * 若要新增 CPU 閒置視覺化，請參閱[新增 CPU 閒置視覺化](monitoring_grafana.html#grafana_add_cpu)。
    * 若要新增已使用的記憶體視覺化，請參閱[新增已使用的記憶體視覺化](monitoring_grafana.html#grafana_add_mem)。
        
7. 儲存自訂儀表板。

    1. 在工具列中，按一下「儲存」圖示。
    2. 輸入儀表板的名稱。
    3. 按一下名稱欄位旁的「儲存」圖示。
    

## 新增 CPU 閒置視覺化
{:#grafana_add_cpu}

若要新增 CPU 閒置圖形，且其中包括您空間中所有容器的資料，請完成下列步驟：

1. 按一下**新增一列**按鈕，即會在列的一側上顯示「列」功能表調節器。
    
2. 將游標移至「列」功能表調節器上方，然後按一下滑出的「列」功能表圖示。

3. 按一下**新增畫面**。然後，按一下**圖形**。

4. 按一下圖形標題，以開啟畫面功能表，然後按一下**編輯**。 

    儀表板的其餘部分會隱藏起來；只會顯示此圖形的編輯器及圖形的預覽。
    
5. 在「度量值」標籤中，建構查詢來收集圖形的資料。 

    例如，當您使用容器時，查詢格式會包括空間 ID、容器群組 ID 及單一容器實例 ID，格式如下：`space_ID.group_ID.instance_ID.metric`
        
    1. 在 A 列中，按一下**選取度量值**。然後，選取您的空間 ID。
    2. 按一下**選取度量值**，並選取星號 (\*)。
    
    當您選取 (\*) 時，資料中會包括空間中每個容器群組的度量值。您可以選擇使用正規表示式來操作此格式，以僅包括特定容器中的度量值。例如，如果您只要查看單一容器中的度量值，並排除容器群組，請按一下**選取度量值**，然後選取 **0000**。
        
    3. 按一下**選取度量值**，然後再次選取星號 (\*)。此格式會包括空間中每個單一容器的度量值。
        
    4. 按一下**選取度量值**及 **cpu-0**。
        
    5. 按一下**選取度量值**及 **cpu-idle**。圖形預覽即會更新，以顯示符合此查詢的度量值。
    
6. 選用項目：自訂圖形的顯示畫面。
    
    * 若要為圖形命名，請按一下「一般」標籤，然後在「標題」欄位中輸入圖形名稱，例如：「CPU 閒置」
    * 若要提供垂直軸的標籤，請按一下「軸及網格」標籤，然後在「左 Y 軸」區段的「標籤」欄位中輸入 CPU。
    * 若要變更圖形的背景顏色，請在「網格」臨界值區段中，按一下「層次 2」的「背景顏色選取器」圖示，將背景顏色變更為白色或淺灰色。
    
    在標頭中，按一下**回到儀表板**。
    
7. 若要儲存您對此儀表板所做的變更，請在標頭中按一下「儲存」圖示，然後按一下功能表中的「儲存」圖示。


## 新增已使用的記憶體視覺化
{:#grafana_add_mem}

請完成下列步驟，以新增已使用的記憶體視覺化：

1. 按一下「新增一列」按鈕。即會在列的一側上顯示「列」功能表調節器。
   
2. 將游標移至「列」功能表調節器上方，然後按一下滑出的「列」功能表圖示。

    1. 按一下「新增畫面」>「圖形」。
    2. 按一下「編輯」。儀表板的其餘部分會隱藏起來；只會顯示此圖形的編輯器及圖形的預覽。
    
3. 在「度量值」標籤中，建構查詢來收集圖形的資料。 

    例如，當您使用容器時，查詢格式會包括空間 ID、容器群組 ID 及單一容器實例 ID，格式如下：space_ID.group_ID.instance_ID.metric
        
    1. 在 A 列中，按一下**選取度量值**。然後，選取您的空間 ID。
    2. 按一下**選取度量值**，並選取星號 (\*)。
    
    當您選取 (\*) 時，資料中會包括空間中每個容器群組的度量值。您可以選擇使用正規表示式來操作此格式，以僅包括特定容器中的度量值。例如，如果您只要查看單一容器中的度量值，並排除容器群組，請按一下**選取度量值**，然後選取 **0000**。
    
    3. 按一下**選取度量值**，然後再次選取星號 (\*)。此格式會包括空間中每個單一容器的度量值。
        
    4. 按一下**選取度量值**及 **memory**。
        
    5. 按一下**選取度量值**及 **memory-used**。圖形預覽即會更新，以顯示符合此查詢的度量值。
    
6. 選用項目：自訂圖形的顯示畫面。
    
    * 若要為圖形命名，請按一下「一般」標籤，然後在「標題」欄位中輸入圖形名稱，例如：「已使用的記憶體」
    *  若要變更垂直軸值的格式，請按一下「軸及網格」標籤，然後在「左 Y 軸」區段的「格式」中，選取「位元組」。
    * 若要提供垂直軸的標籤，請在「標籤」欄位中輸入「記憶體」。
    * 若要變更圖形的背景顏色，請在「網格」臨界值區段中，按一下「層次 2」的「背景顏色選取器」圖示，將背景顏色變更為白色或淺灰色。
    
    在標頭中，按一下**回到儀表板**。

7. 若要儲存您對此儀表板所做的變更，請在標頭中按一下「儲存」圖示，然後按一下功能表中的「儲存」圖示。

