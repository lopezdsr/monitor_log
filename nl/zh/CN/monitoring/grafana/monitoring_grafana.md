---

copyright:
  years: 2015, 2017

lastupdated: "2017-04-06"

---


{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:screen: .screen}

# 创建 Grafana 仪表板
{:#monitoring_grafana}

创建定制 Grafana 仪表板以显示 {{site.data.keyword.Bluemix}} 组织空间中运行的所有容器的度量值。
{:shortdesc}

要创建 Grafana 仪表板，请完成以下步骤：

1. 通过 Web 浏览器启动 Grafana。有关更多信息，请参阅[通过 Web 浏览器导航至 Grafana 仪表板](monitoring_analyzing_metrics_grafana.html#launch_grafana_from_browser)。

2. 保存缺省仪表板。

    1. 在工具栏中，单击“保存”图标。
    2. 输入仪表板的名称。
    3. 在“名称”字段旁边，单击“保存”图标。
   
3. 在仪表板上工作时，请禁用自动页面刷新。 

    1. 单击标题中的时间选取器。
    2. 选择**自动刷新**。
    3. 单击**关闭**。
 
 5. 删除示例行。
 
     1. 将光标悬停在*欢迎使用 Grafana* 标题旁边的“行”菜单滑块上，然后单击滑出的“行”菜单图标。
     2. 单击**删除行**，然后单击**是**。
     
     重复上述步骤以除去“文档链接”行和“第一个图形”行。 
     
     在页面标题中，调整时间选取器以确保可以查看数据。缺省值为“6 小时到几秒钟之前”。选择**最近 30 天**。
     
6. 添加可视化项。

    * 要添加“CPU 空闲量”可视化项，请参阅[添加“CPU 空闲量”可视化项](monitoring_grafana.html#grafana_add_cpu)。
    * 要添加“已用内存”可视化项，请参阅[添加“已用内存”可视化项](monitoring_grafana.html#grafana_add_mem)。
        
7. 保存定制仪表板。

    1. 在工具栏中，单击“保存”图标。
    2. 输入仪表板的名称。
    3. 在“名称”字段旁边，单击“保存”图标。
    

## 添加“CPU 空闲量”可视化项
{:#grafana_add_cpu}

要添加包含空间中所有容器的数据的“CPU 空闲量”图形，请完成以下步骤：

1. 单击**添加行**按钮。这将在行的一侧显示“行”菜单滑块。

    
2. 将光标悬停在“行”菜单滑块上，然后单击滑出的“行”菜单图标。

3. 单击**添加面板**。然后，单击**图形**。

4. 单击图形标题以打开面板菜单，然后单击**编辑**。 

    仪表板的其余部分会隐藏起来；仅会显示适用于此图形的编辑器和图形的预览。

    
5. 在“度量值”选项卡中，构造一个查询以收集图形的数据。 

    例如，使用容器时，查询格式包含空间标识、容器组标识和单个容器实例标识，格式如下：`space_ID.group_ID.instance_ID.metric`
        
    1. 在 A 行中，单击**选择度量值**。然后，选择空间标识。
    2. 单击**选择度量值**，并选择星号 (\*)。
    
    选择 (\*) 时，数据会包含空间中每个容器组的度量值。（可选）您可以使用正则表达式来处理此格式，以仅包含特定容器的度量值。例如，如果要仅查看单个容器的度量值而排除容器组，请单击**选择度量值**，然后选择 **0000**。
        
    3. 再次单击**选择度量值**，并选择星号 (\*)。此格式包含空间中每个单一容器的度量值。
        
    4. 单击**选择度量值**和 **cpu-0**。
        
    5. 单击**选择度量值**和 **cpu-idle**。图形预览会更新，以显示与此查询匹配的度量值。
    
6. 可选：定制图形的显示。
    
    * 要对图形命名，请单击“常规”选项卡，并在“标题”字段中输入图形的名称，例如：CPU 空闲量
    * 要为垂直轴提供标签，请单击“轴和网格”选项卡，然后在“左 Y 轴”部分的“标签”字段中输入 CPU。
    * 要更改图形的背景色，请在“网格阈值”部分中，单击“级别 2”的“背景色选取器”图标，并将背景色更改为白色或浅灰。
    
    在标题中，单击**返回仪表板**。
    
7. 要保存对此仪表板进行的更改，请单击标题中的“保存”图标，然后单击菜单中的“保存”图标。


## 添加“已用内存”可视化项
{:#grafana_add_mem}

要添加“已用内存”可视化项，请完成以下步骤：

1. 单击“添加行”按钮。这将在行的一侧显示“行”菜单滑块。
   
2. 将光标悬停在“行”菜单滑块上，然后单击滑出的“行”菜单图标。

    1. 单击“添加面板”>“图形”。
    2. 单击“编辑”。仪表板的其余部分会隐藏起来；仅会显示适用于此图形的编辑器和图形的预览。

    
3. 在“度量值”选项卡中，构造一个查询以收集图形的数据。 

    例如，使用容器时，查询格式包含空间标识、容器组标识和单个容器实例标识，格式如下：space_ID.group_ID.instance_ID.metric
        
    1. 在 A 行中，单击**选择度量值**。然后，选择空间标识。
    2. 单击**选择度量值**，并选择星号 (\*)。
    
    选择 (\*) 时，数据会包含空间中每个容器组的度量值。（可选）您可以使用正则表达式来处理此格式，以仅包含特定容器的度量值。例如，如果要仅查看单个容器的度量值而排除容器组，请单击**选择度量值**，然后选择 **0000**。
    
    3. 再次单击**选择度量值**，并选择星号 (\*)。此格式包含空间中每个单一容器的度量值。
        
    4. 单击**选择度量值**和 **memory**。
        
    5. 单击**选择度量值**和 **memory-used**。图形预览会更新，以显示与此查询匹配的度量值。
    
6. 可选：定制图形的显示。
    
    * 要对图形命名，请单击“常规”选项卡，并在“标题”字段中输入图形的名称，例如：已用内存
    *  要更改垂直轴值的格式，请单击“轴和网格”选项卡，然后在“左 Y 轴”部分中，为“格式”字段选择“字节”。
    * 要为垂直轴提供标签，请在“标签”字段中输入“内存”。
    * 要更改图形的背景色，请在“网格阈值”部分中，单击“级别 2”的“背景色选取器”图标，并将背景色更改为白色或浅灰。
    
    在标题中，单击**返回仪表板**。

7. 要保存对此仪表板进行的更改，请单击标题中的“保存”图标，然后单击菜单中的“保存”图标。

